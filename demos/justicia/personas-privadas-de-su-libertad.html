<!DOCTYPE html>
<!--[if IEMobile 7 ]> <html lang="es"class="iem7"> <![endif]-->
<!--[if lt IE 7 ]> <html lang="es" class="ie6 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7 ]>    <html lang="es" class="ie7 lt-ie8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="es" class="ie8"> <![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html lang="es">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Banco de Pruebas</title>
    <meta name="description" content="Base de html y css para la creación de sitios pertenecientes a la Administración Pública Nacional de la República Argentina.">
    <meta name="author" content="Presidencia de la Nación">
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- Nav and address bar color -->
    <meta name="theme-color" content="#0072b8">
    <meta name="msapplication-navbutton-color" content="#0072b8">
    <meta name="apple-mobile-web-app-status-bar-style" content="#0072b8">
    <meta property="og:url" content="http://localhost:4000/proyectos/argentina/" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Banco de Pruebas" />
    <meta property="og:description" content="Base de html y css para la creación de sitios pertenecientes a la Administración Pública Nacional de la República Argentina." />
    <meta property="og:image" content="/ejemplos/img/jumbotron.jpg" />
    <meta property="og:locale" content="es_AR" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Banco de Pruebas" />
    <meta name="twitter:description" content="Base de html y css para la creación de sitios pertenecientes a la Administración Pública Nacional de la República Argentina." />
    <meta name="twitter:image" content="/ejemplos/img/jumbotron.jpg" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,700i" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" media="all" />
    <link rel="stylesheet" href="https://argob.github.io/poncho/node_modules/argob-poncho/dist/css/poncho.min.css">
    <link rel="stylesheet" href="https://argob.github.io/poncho/node_modules/argob-poncho/dist/css/icono-arg.css">
    <link rel="stylesheet" href="https://argob.github.io/poncho/node_modules/argob-poncho/dist/css/argentina.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="http://argob.github.io/poncho/js/html5shiv.js"></script>
      <script src="http://argob.github.io/poncho/js/respond.min.js"></script>
  <![endif]-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/datosgobar/series-tiempo-ar-explorer@ts_components_2.7.0/dist/css/components.css" type="text/css">
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
<script type='text/javascript' src='https://cdn.jsdelivr.net/gh/datosgobar/series-tiempo-ar-explorer@ts_components_2.7.0/dist/js/components.js'></script>

<body role="document" class="html not-front not-logged-in no-sidebars page-node page-node- page-node-26548 node-type-area og-context og-context-node og-context-node-26548 i18n-es">
    <div id="skip-link"> <a href="#main-content" class="element-invisible element-focusable">Pasar al contenido principal</a></div>
    <main role="main"> <a id="main-content"></a>
        <div class="container"></div>
        <div class="region region-content">
            <div id="block-system-main" class="block block-system clearfix">
                <section>
                    <div class="container" id="otros_delitos_panels">
                        <div class="row ">
                            <div class="col-md-12">
                                <h4 class="h4 section-title">Personas privadas de su libertad alojadas en unidades penitenciarias</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-sm-6 col-md-6">
                                <select name="otros-delitos-selector" id="otros-delitos-selector-delitos-id" class="form-control">
                                    <option value="c" selected>Personas condenadas</option>
                                    <option value="p">Personas procesadas</option>
                                    <option value="o">Personas en otra situacion legal (inimputables, contraventores, no informados) </option>
                                </select>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-6">
                                <select name="otros-delitos-provincias-selector" id="otros-delitos-selector-provincias-id" class="form-control">
                                    <option value="arg" selected>Total Argentina</option>
                                    <option value="06">Buenos Aires</option>
                                    <option value="10">Catamarca</option>
                                    <option value="22">Chaco</option>
                                    <option value="26">Chubut</option>
                                    <option value="02">Ciudad Autónoma de Buenos Aires</option>
                                    <option value="14">Córdoba</option>
                                    <option value="18">Corrientes</option>
                                    <option value="30">Entre Ríos</option>
                                    <option value="34">Formosa</option>
                                    <option value="38">Jujuy</option>
                                    <option value="42">La Pampa</option>
                                    <option value="46">La Rioja</option>
                                    <option value="50">Mendoza</option>
                                    <option value="54">Misiones</option>
                                    <option value="58">Neuquén</option>
                                    <option value="62">Río Negro</option>
                                    <option value="66">Salta</option>
                                    <option value="70">San Juan</option>
                                    <option value="74">San Luis</option>
                                    <option value="78">Santa Cruz</option>
                                    <option value="82">Santa Fe</option>
                                    <option value="86">Santiago del Estero</option>
                                    <option value="94">Tierra del Fuego, Antártida e Islas del Atlántico Sur</option>
                                    <option value="90">Tucumán</option>
                                </select>
                            </div>
                        </div>
                        <!-- COMIENZO DE LOS PANELES DE OTROS-DELITOS-PROVINCIAS-INDICADORES -->
                        <br>
                        <div class="row panels-row otros-delitos-panel" id="sneep_c_arg_panel">
                            <div style="margin-top: auto; margin-bottom: auto;" class="col-xs-12 col-sm-6 col-md-6">
                                <div class="center-block card-wrapper" id='sneep_c_arg_card'></div>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-6">
                                <div class="center-block full-width" style="height: 380px; width: 100%;" id='sneep_c_arg_graphic'></div>
                            </div>
                        </div>
                        <!-- los nuevos paneles de provincia-indicadore se agregan dinámicamente -->
                        <!-- FIN DE LOS PANELES DE DELITOS-PERSONAS-PROVINCIAS-INDICADORES -->
                    </div>
                </section>
            </div>
        </div>
    </main>
    <script type="text/javascript">
    // COLORES SUGERIDOS "#0072BB","#2E7D33","#C62828","#F9A822","#6A1B99", "#EC407A","#C2185B","#6A1B99","#039BE5","#6EA100"
    // componentes de series de tiempo
    function hideSeriesDivs() {
        $(".serie-div").each(function() {
            $(this).hide();
        });
    }

    function showSerieDiv(targetDivId, serieIds) {
        var hdv = serieIds.split(',')[0] + ""
        var hdt = serieIds.split(',')[1] + ""

        var chartTypes = {}
        chartTypes[hdt] = "column"

        var seriesAxis = {}
        seriesAxis[hdv] = "left"
        seriesAxis[hdt] = "right"

        var decimalTooltips = {}
        decimalTooltips[hdv] = 0
        decimalTooltips[hdt] = 1

        TSComponents.Graphic.render(targetDivId, {
            graphicUrl: "https://apis.datos.gob.ar/series/api/series?ids=" + serieIds,
            chartTypes: chartTypes,
            seriesAxis: seriesAxis,
            decimalTooltips: decimalTooltips
        });

        $("#" + targetDivId).show();
    }

    var INDICS_PARAMS = {
        "hechos": { "color": 0, "title": "Personas privadas de la libertad" },
        "victimas": { "color": 3, "title": "Víctimas" }
    }
    $(document).ready(function() {

        function delitosPanelCard(provinceId, delitoId, variable) {
            var serieId = "sneep_" + delitoId + "_" + provinceId
            var cardTargetDiv = serieId + "_card"

            TSComponents.Card.render(cardTargetDiv, {
                serieId: serieId,
                decimals: 0,
                color: INDICS_PARAMS[variable]["color"],
                title: INDICS_PARAMS[variable]["title"]
            });
        }

        function otrosDelitosPanelGraphic(provinceId, delitoId) {
            var serieIdHechos = "sneep_" + delitoId + "_" + provinceId
            var graphicTargetDiv = "sneep_" + delitoId + "_" + provinceId + "_graphic"

            var chartTypes = {}
            chartTypes[serieIdHechos] = "column"
            // chartTypes[serieIdVictimas] = "column"

            var seriesAxis = {}
            seriesAxis[serieIdHechos] = "left"
            // seriesAxis[serieIdVictimas] = "left"

            var decimalTooltips = {}
            decimalTooltips[serieIdHechos] = 0
            // decimalTooltips[serieIdVictimas] = 0

            TSComponents.Graphic.render(graphicTargetDiv, {
                graphicUrl: "https://apis.datos.gob.ar/series/api/series?ids=" + serieIdHechos,
                colors: [INDICS_PARAMS["hechos"]["color"]],
                chartTypes: chartTypes,
                seriesAxis: seriesAxis,
                decimalTooltips: decimalTooltips,
                datePickerEnabled: false,
                zoom: false,
                navigator: true,
                decimalRightAxis: 0,
                decimalLeftAxis: 0
            });
        }

        function otrosDelitosPanelHtml(provinceId, delitoId) {
            var delitosPersonasPanelId = "#sneep_" + delitoId + "_" + provinceId + "_panel"

            if ($(delitosPersonasPanelId).length) {
                // it exists
            } else {
                var panelTemplate = $("#sneep_c_arg_panel").prop('outerHTML')
                var newPanelHtml = panelTemplate.replace(/arg/g, provinceId).replace(/_c_/g, '_' + delitoId + '_')
                $("#otros_delitos_panels").append($(newPanelHtml))
            }
        }

        function otrosDelitosPanel(provinceId, delitoId) {
            otrosDelitosPanelHtml(provinceId, delitoId)
            delitosPanelCard(provinceId, delitoId, "hechos")
            otrosDelitosPanelGraphic(provinceId, delitoId)
        }

        // crea el selector de OTROS-DELITOS-DELITOS
        $("#otros-delitos-selector-delitos-id").on("change", function() {
            var selectorDelitos = $(this);
            var selectorProvincias = $("#otros-delitos-selector-provincias-id");
            var delitoId = selectorDelitos.val()
            var provinceId = selectorProvincias.val()

            // hide all
            $(".otros-delitos-panel").each(function() {
                $(this).hide();
            });

            // crea el panel si todavía no existe
            otrosDelitosPanel(provinceId, delitoId)

            // show selected
            $("#sneep_" + delitoId + "_" + provinceId + "_panel").show();
        });

        // crea el selector de OTROS-DELITOS-PROVINCIAS
        $("#otros-delitos-selector-provincias-id").on("change", function() {
            var selectorDelitos = $("#otros-delitos-selector-delitos-id");
            var selectorProvincias = $(this);
            var delitoId = selectorDelitos.val()
            var provinceId = selectorProvincias.val()

            // hide all
            $(".otros-delitos-panel").each(function() {
                $(this).hide();
            });

            // crea el panel si todavía no existe
            otrosDelitosPanel(provinceId, delitoId)

            // show selected
            $("#sneep_" + delitoId + "_" + provinceId + "_panel").show();
        });

        // crea el primer panel de indicadores de delitos contra las personas
        otrosDelitosPanel("arg", "c")
    });
    </script>
</body>

</html>
